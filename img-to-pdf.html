<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free online tool to convert images to PDF format. Convert JPG, PNG, GIF, BMP and other images to PDF quickly and easily with customizable options.">
    <meta name="keywords" content="image to pdf, convert to pdf, JPG to PDF, PNG to PDF, online pdf converter, image converter">
    <meta name="author" content="PDFConverterPro">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Free Online Image to PDF Converter">
    <meta property="og:description" content="Convert your images to PDF format online for free with our powerful conversion tool.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://raja1068.github.io/Tools/img-to-pdf.html">
    <meta property="og:image" content="https://raja1068.github.io/Tools/img-to-pdf-preview.jpg">
    <link rel="canonical" href="https://raja1068.github.io/Tools/img-to-pdf.html">
    <title>Free Online Image to PDF Converter | Convert JPG, PNG, GIF to PDF</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <style>
        :root {
            --primary-color: #4285f4;
            --secondary-color: #34a853;
            --accent-color: #ea4335;
            --light-gray: #f5f5f5;
            --dark-gray: #333;
            --medium-gray: #757575;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --border-radius: 8px;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            line-height: 1.6;
            color: var(--dark-gray);
            background-color: #f9f9f9;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background-color: white;
            box-shadow: var(--shadow);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
        }
        
        .ad-top, .ad-bottom {
            background-color: var(--light-gray);
            padding: 20px;
            text-align: center;
            margin: 20px 0;
            border-radius: var(--border-radius);
            border: 1px dashed #ccc;
        }
        
        main {
            padding: 40px 0;
        }
        
        .converter-container {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 40px;
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 2.2rem;
            text-align: center;
        }
        
        .subtitle {
            color: var(--medium-gray);
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        
        .upload-area {
            border: 2px dashed var(--primary-color);
            border-radius: var(--border-radius);
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 30px;
            background-color: rgba(66, 133, 244, 0.05);
        }
        
        .upload-area:hover {
            background-color: rgba(66, 133, 244, 0.1);
        }
        
        .upload-icon {
            font-size: 48px;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .file-input {
            display: none;
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .control-group {
            flex: 1;
            min-width: 250px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-gray);
        }
        
        select, input[type="range"], input[type="number"], input[type="color"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            background-color: white;
        }
        
        input[type="range"] {
            -webkit-appearance: none;
            height: 8px;
            background: #ddd;
            border-radius: 5px;
            padding: 0;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
        }
        
        .range-value {
            display: inline-block;
            margin-left: 10px;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background-color 0.3s;
            display: inline-block;
        }
        
        .button:hover {
            background-color: #3367d6;
        }
        
        .button-secondary {
            background-color: var(--medium-gray);
        }
        
        .button-secondary:hover {
            background-color: #616161;
        }
        
        .results {
            display: none;
            margin-top: 30px;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .preview {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .image-box {
            flex: 1;
            min-width: 300px;
            text-align: center;
        }
        
        .image-box img {
            max-width: 100%;
            max-height: 300px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }
        
        .image-info {
            margin-top: 10px;
            font-size: 14px;
        }
        
        .download-btn {
            text-align: center;
            margin-top: 20px;
        }
        
        footer {
            background-color: var(--dark-gray);
            color: white;
            padding: 30px 0;
            text-align: center;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .footer-links a {
            color: white;
            text-decoration: none;
        }
        
        .footer-links a:hover {
            text-decoration: underline;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
        }
        
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid var(--primary-color);
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .format-info {
            margin-top: 5px;
            font-size: 13px;
            color: var(--medium-gray);
        }
        
        .page-preview {
            background-color: white;
            border: 1px solid #ddd;
            margin: 20px auto;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }
        
        .page-preview-inner {
            position: absolute;
            border: 1px dashed #ccc;
        }
        
        .page-preview img {
            position: absolute;
            max-width: 100%;
            max-height: 100%;
        }
        
        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
            }
            
            .preview {
                flex-direction: column;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <a href="/" class="logo">PDFConverterPro</a>
            <nav>
                <a href="#" class="button button-secondary">FAQ</a>
            </nav>
        </div>
    </header>
    
    <div class="container">
        <div class="ad-top">
            <!-- Google AdSense Ad Unit -->
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=pub-9770610643444805"
                crossorigin="anonymous"></script>
            <!-- Top Banner Ad -->
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-9770610643444805~6334751089"
                data-ad-slot="4587389292"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
        
        <main>
            <div class="converter-container">
                <h1>Image to PDF Converter</h1>
                <p class="subtitle">Convert JPG, PNG, GIF, BMP and other images to PDF in seconds.</p>
                
                <div id="uploadArea" class="upload-area">
                    <div class="upload-icon">🖼️</div>
                    <h3>Drag & Drop Your Images Here</h3>
                    <p>or click to browse files (multiple selection supported)</p>
                    <input type="file" id="fileInput" class="file-input" accept="image/*" multiple>
                </div>
                
                <div class="controls">
                    <div class="control-group">
                        <label for="pageSize">Page Size</label>
                        <select id="pageSize">
                            <option value="a4">A4 (210 × 297 mm)</option>
                            <option value="letter">Letter (8.5 × 11 in)</option>
                            <option value="legal">Legal (8.5 × 14 in)</option>
                            <option value="a5">A5 (148 × 210 mm)</option>
                            <option value="auto">Auto (Fit to image)</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label for="pageOrientation">Page Orientation</label>
                        <select id="pageOrientation">
                            <option value="portrait">Portrait</option>
                            <option value="landscape">Landscape</option>
                            <option value="auto">Auto (Based on image)</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label for="margin">Margin (mm): <span id="marginValue" class="range-value">10</span></label>
                        <input type="range" id="margin" min="0" max="50" value="10">
                    </div>
                    
                    <div class="control-group">
                        <label for="imageFit">Image Fit</label>
                        <select id="imageFit">
                            <option value="fill">Fill Page (Stretch)</option>
                            <option value="fit">Fit (Maintain Aspect Ratio)</option>
                            <option value="actual">Actual Size</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label for="pageBackground">Page Background</label>
                        <select id="pageBackground">
                            <option value="white">White</option>
                            <option value="black">Black</option>
                            <option value="transparent">Transparent</option>
                            <option value="custom">Custom Color</option>
                        </select>
                        <input type="color" id="customBgColor" value="#f0f0f0" style="display: none; margin-top: 8px;">
                    </div>
                    
                    <div class="control-group">
                        <label for="imagePosition">Image Position</label>
                        <select id="imagePosition">
                            <option value="center">Center</option>
                            <option value="top">Top</option>
                            <option value="bottom">Bottom</option>
                            <option value="left">Left</option>
                            <option value="right">Right</option>
                        </select>
                    </div>
                </div>
                
                <div style="text-align: center;">
                    <button id="convertBtn" class="button" disabled>Convert to PDF</button>
                </div>
                
                <div class="loading" id="loadingIndicator">
                    <div class="spinner"></div>
                    <p>Creating your PDF document...</p>
                </div>
                
                <div class="results" id="resultsSection">
                    <div class="preview">
                        <div class="image-box">
                            <h3>Selected Images</h3>
                            <div id="imagePreviewContainer" style="max-height: 300px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; border-radius: var(--border-radius);">
                                <p>No images selected</p>
                            </div>
                            <div class="image-info">
                                <p id="imageCount">0 images selected</p>
                                <p id="totalSize">Total size: 0 KB</p>
                            </div>
                        </div>
                        
                        <div class="image-box">
                            <h3>PDF Preview</h3>
                            <div id="pdfPreview" class="page-preview" style="width: 210px; height: 297px; background-color: white;">
                                <div class="page-preview-inner" style="top: 10px; left: 10px; right: 10px; bottom: 10px;">
                                    <img id="pdfPreviewImage" src="" alt="PDF Preview" style="top: 50%; left: 50%; transform: translate(-50%, -50%);">
                                </div>
                            </div>
                            <div class="image-info">
                                <p id="pdfPageSize">Page size: A4</p>
                                <p id="pdfPageCount">Pages: 1</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="download-btn">
                        <button id="downloadBtn" class="button">Download PDF Document</button>
                    </div>
                </div>
            </div>
            
            <section class="seo-content">
                <h2>Convert Images to PDF Documents</h2>
                <p>Our free online Image to PDF converter tool helps you transform JPG, PNG, GIF, BMP, and other image formats into professional PDF documents. PDF is the universal standard for document sharing, perfect for reports, presentations, and archiving.</p>
                
                <h3>Why Convert Images to PDF?</h3>
                <ul>
                    <li><strong>Universal compatibility:</strong> PDF works on all devices and platforms</li>
                    <li><strong>Professional documents:</strong> Create clean, printable documents from images</li>
                    <li><strong>Multiple images in one file:</strong> Combine several images into a single PDF</li>
                    <li><strong>Better organization:</strong> Keep related images together in one document</li>
                    <li><strong>Preserve quality:</strong> Maintain image resolution in a portable format</li>
                </ul>
                
                <h3>How to Use Our Image to PDF Converter</h3>
                <ol>
                    <li>Upload your JPG, PNG, GIF or BMP image files (multiple selection supported)</li>
                    <li>Adjust page layout, margins, and other settings as needed</li>
                    <li>Click "Convert to PDF" to process your files</li>
                    <li>Download the converted PDF document</li>
                </ol>
                
                <h3>Supported Input Formats</h3>
                <p>Our tool supports conversion from all major image formats including JPG, PNG, GIF, BMP, WebP, and TIFF. The output will always be a high-quality PDF file.</p>
                
                <h3>Advanced PDF Customization</h3>
                <p>Customize your PDF document with various options:</p>
                <ul>
                    <li><strong>Page size:</strong> Choose from standard sizes like A4, Letter, or custom dimensions</li>
                    <li><strong>Page orientation:</strong> Portrait or landscape layout</li>
                    <li><strong>Margins:</strong> Set margins around your images</li>
                    <li><strong>Image fit:</strong> Control how images appear on the page</li>
                    <li><strong>Background color:</strong> White, black, transparent, or custom color</li>
                </ul>
            </section>
        </main>
        
        <div class="ad-bottom">
            <!-- Google AdSense Ad Unit -->
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=pub-9770610643444805"
                crossorigin="anonymous"></script>
            <!-- Bottom Banner Ad -->
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-9770610643444805~6334751089"
                data-ad-slot="4587389292"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </div>
    
    <footer>
        <div class="container">
            <div class="footer-links">
                <a href="/privacy">Privacy Policy</a>
                <a href="/terms">Terms of Service</a>
                <a href="/contact">Contact Us</a>
                <a href="/blog">Blog</a>
            </div>
            <p>&copy; <span id="currentYear"></span> PDFConverterPro. All rights reserved.</p>
        </div>
    </footer>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set current year in footer
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            
            // Initialize jsPDF
            const { jsPDF } = window.jspdf;
            
            // DOM elements
            const fileInput = document.getElementById('fileInput');
            const uploadArea = document.getElementById('uploadArea');
            const convertBtn = document.getElementById('convertBtn');
            const marginSlider = document.getElementById('margin');
            const marginValue = document.getElementById('marginValue');
            const resultsSection = document.getElementById('resultsSection');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const pageBackgroundSelect = document.getElementById('pageBackground');
            const customBgColor = document.getElementById('customBgColor');
            const imagePreviewContainer = document.getElementById('imagePreviewContainer');
            const pdfPreview = document.getElementById('pdfPreview');
            const pdfPreviewImage = document.getElementById('pdfPreviewImage');
            const imageCountElement = document.getElementById('imageCount');
            const totalSizeElement = document.getElementById('totalSize');
            const pdfPageSizeElement = document.getElementById('pdfPageSize');
            const pdfPageCountElement = document.getElementById('pdfPageCount');
            
            // Variables to store image data
            let selectedImages = [];
            let pdfBlob = null;
            
            // Update margin value display
            marginSlider.addEventListener('input', function() {
                marginValue.textContent = this.value;
                updatePdfPreview();
            });
            
            // Show/hide custom color picker
            pageBackgroundSelect.addEventListener('change', function() {
                customBgColor.style.display = this.value === 'custom' ? 'block' : 'none';
                updatePdfPreview();
            });
            
            customBgColor.addEventListener('input', function() {
                updatePdfPreview();
            });
            
            // Handle drag and drop
            uploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.style.backgroundColor = 'rgba(66, 133, 244, 0.2)';
            });
            
            uploadArea.addEventListener('dragleave', function() {
                this.style.backgroundColor = 'rgba(66, 133, 244, 0.05)';
            });
            
            uploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                this.style.backgroundColor = 'rgba(66, 133, 244, 0.05)';
                
                if (e.dataTransfer.files.length) {
                    fileInput.files = e.dataTransfer.files;
                    handleFileSelection();
                }
            });
            
            // Handle click to browse
            uploadArea.addEventListener('click', function() {
                fileInput.click();
            });
            
            // Handle file selection
            fileInput.addEventListener('change', handleFileSelection);
            
            function handleFileSelection() {
                const files = fileInput.files;
                if (!files || files.length === 0) return;
                
                selectedImages = [];
                let totalSize = 0;
                
                // Clear previous previews
                imagePreviewContainer.innerHTML = '';
                
                // Process each file
                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    
                    // Check if file is an image
                    if (!file.type.match('image.*')) {
                        alert(`Skipping non-image file: ${file.name}`);
                        continue;
                    }
                    
                    totalSize += file.size;
                    
                    // Read the image file
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const img = new Image();
                        img.onload = function() {
                            selectedImages.push({
                                file: file,
                                dataUrl: e.target.result,
                                imgElement: img,
                                width: img.width,
                                height: img.height
                            });
                            
                            // Add to preview container
                            const previewDiv = document.createElement('div');
                            previewDiv.style.display = 'inline-block';
                            previewDiv.style.margin = '5px';
                            previewDiv.style.textAlign = 'center';
                            
                            const previewImg = document.createElement('img');
                            previewImg.src = e.target.result;
                            previewImg.style.maxWidth = '100px';
                            previewImg.style.maxHeight = '100px';
                            previewImg.style.borderRadius = '4px';
                            
                            const previewText = document.createElement('div');
                            previewText.textContent = file.name;
                            previewText.style.fontSize = '12px';
                            previewText.style.marginTop = '5px';
                            previewText.style.overflow = 'hidden';
                            previewText.style.textOverflow = 'ellipsis';
                            previewText.style.whiteSpace = 'nowrap';
                            previewText.style.width = '100px';
                            
                            previewDiv.appendChild(previewImg);
                            previewDiv.appendChild(previewText);
                            imagePreviewContainer.appendChild(previewDiv);
                            
                            // Update info after last image
                            if (selectedImages.length === files.length) {
                                updateImageInfo();
                                updatePdfPreview();
                                
                                // Enable convert button
                                convertBtn.disabled = false;
                            }
                        };
                        img.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
                
                // Update upload area display
                uploadArea.innerHTML = `
                    <div style="font-size: 48px;">✅</div>
                    <h3>${files.length} ${files.length === 1 ? 'file' : 'files'} selected</h3>
                    <p>${(totalSize / 1024).toFixed(2)} KB total</p>
                `;
            }
            
            function updateImageInfo() {
                imageCountElement.textContent = `${selectedImages.length} ${selectedImages.length === 1 ? 'image' : 'images'} selected`;
                const totalSize = selectedImages.reduce((sum, img) => sum + img.file.size, 0);
                totalSizeElement.textContent = `Total size: ${(totalSize / 1024).toFixed(2)} KB`;
            }
            
            function updatePdfPreview() {
                if (selectedImages.length === 0) return;
                
                // Use first image for preview
                const previewImage = selectedImages[0];
                pdfPreviewImage.src = previewImage.dataUrl;
                
                // Get settings
                const pageSize = document.getElementById('pageSize').value;
                const orientation = document.getElementById('pageOrientation').value;
                const margin = parseInt(marginSlider.value);
                const imageFit = document.getElementById('imageFit').value;
                const imagePosition = document.getElementById('imagePosition').value;
                const bgColor = getBackgroundColor();
                
                // Set preview background
                pdfPreview.style.backgroundColor = bgColor;
                
                // Update page size display
                let pageSizeText = '';
                switch(pageSize) {
                    case 'a4': pageSizeText = 'A4 (210 × 297 mm)'; break;
                    case 'letter': pageSizeText = 'Letter (8.5 × 11 in)'; break;
                    case 'legal': pageSizeText = 'Legal (8.5 × 14 in)'; break;
                    case 'a5': pageSizeText = 'A5 (148 × 210 mm)'; break;
                    case 'auto': pageSizeText = `Auto (${previewImage.width} × ${previewImage.height} px)`; break;
                }
                pdfPageSizeElement.textContent = `Page size: ${pageSizeText}`;
                pdfPageCountElement.textContent = `Pages: ${selectedImages.length}`;
                
                // Set preview dimensions based on page size
                let previewWidth, previewHeight;
                if (pageSize === 'auto') {
                    // Auto size based on image dimensions
                    const aspectRatio = previewImage.width / previewImage.height;
                    previewHeight = 200;
                    previewWidth = previewHeight * aspectRatio;
                    
                    // Limit dimensions
                    if (previewWidth > 300) {
                        previewWidth = 300;
                        previewHeight = previewWidth / aspectRatio;
                    }
                } else {
                    // Standard page sizes (A4 aspect ratio)
                    previewWidth = 210;
                    previewHeight = 297;
                }
                
                // Adjust for orientation
                if (orientation === 'landscape' || (orientation === 'auto' && previewImage.width > previewImage.height)) {
                    [previewWidth, previewHeight] = [previewHeight, previewWidth];
                }
                
                // Apply to preview
                pdfPreview.style.width = `${previewWidth}px`;
                pdfPreview.style.height = `${previewHeight}px`;
                
                // Position the image in preview
                const inner = pdfPreview.querySelector('.page-preview-inner');
                inner.style.top = `${margin}px`;
                inner.style.left = `${margin}px`;
                inner.style.right = `${margin}px`;
                inner.style.bottom = `${margin}px`;
                
                // Position the image based on settings
                switch(imagePosition) {
                    case 'center':
                        pdfPreviewImage.style.top = '50%';
                        pdfPreviewImage.style.left = '50%';
                        pdfPreviewImage.style.transform = 'translate(-50%, -50%)';
                        break;
                    case 'top':
                        pdfPreviewImage.style.top = '0';
                        pdfPreviewImage.style.left = '50%';
                        pdfPreviewImage.style.transform = 'translateX(-50%)';
                        break;
                    case 'bottom':
                        pdfPreviewImage.style.bottom = '0';
                        pdfPreviewImage.style.left = '50%';
                        pdfPreviewImage.style.transform = 'translateX(-50%)';
                        break;
                    case 'left':
                        pdfPreviewImage.style.top = '50%';
                        pdfPreviewImage.style.left = '0';
                        pdfPreviewImage.style.transform = 'translateY(-50%)';
                        break;
                    case 'right':
                        pdfPreviewImage.style.top = '50%';
                        pdfPreviewImage.style.right = '0';
                        pdfPreviewImage.style.transform = 'translateY(-50%)';
                        break;
                }
                
                // Show results if not already shown
                resultsSection.style.display = 'block';
            }
            
            function getBackgroundColor() {
                const bgOption = pageBackgroundSelect.value;
                switch(bgOption) {
                    case 'white': return '#ffffff';
                    case 'black': return '#000000';
                    case 'transparent': return 'transparent';
                    case 'custom': return customBgColor.value;
                    default: return '#ffffff';
                }
            }
            
            // Handle convert button click
            convertBtn.addEventListener('click', function() {
                if (selectedImages.length === 0) return;
                
                // Show loading indicator
                loadingIndicator.style.display = 'block';
                resultsSection.style.display = 'none';
                
                // Get conversion settings
                const pageSize = document.getElementById('pageSize').value;
                const orientation = document.getElementById('pageOrientation').value;
                const margin = parseInt(marginSlider.value);
                const imageFit = document.getElementById('imageFit').value;
                const imagePosition = document.getElementById('imagePosition').value;
                const bgColor = getBackgroundColor();
                
                // Process images after a small delay to allow UI to update
                setTimeout(() => {
                    convertToPdf(selectedImages, pageSize, orientation, margin, imageFit, imagePosition, bgColor)
                        .then(blob => {
                            pdfBlob = blob;
                            
                            // Hide loading indicator
                            loadingIndicator.style.display = 'none';
                            
                            // Show results
                            resultsSection.style.display = 'block';
                        })
                        .catch(error => {
                            console.error('Conversion error:', error);
                            alert('An error occurred during conversion. Please try again.');
                            loadingIndicator.style.display = 'none';
                        });
                }, 100);
            });
            
            // Handle download button click
            document.getElementById('downloadBtn').addEventListener('click', function() {
                if (!pdfBlob) return;
                
                const url = URL.createObjectURL(pdfBlob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'converted_images.pdf';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });
            
            // Image conversion function to PDF
            async function convertToPdf(images, pageSize, orientation, margin, imageFit, imagePosition, bgColor) {
                try {
                    // Initialize PDF
                    const { jsPDF } = window.jspdf;
                    const pdf = new jsPDF({
                        orientation: orientation === 'landscape' ? 'l' : 'p',
                        unit: 'mm'
                    });
                    
                    // Process each image
                    for (let i = 0; i < images.length; i++) {
                        const image = images[i];
                        
                        if (i > 0) {
                            pdf.addPage();
                        }
                        
                        // Set page size
                            let pageWidth, pageHeight;
                            if (pageSize === 'auto') {
                                // Auto size based on image dimensions
                                // Convert pixels to mm (assuming 96 DPI)
                                pageWidth = image.width * 25.4 / 96;
                                pageHeight = image.height * 25.4 / 96;
                                
                                // Set orientation based on image if auto
                                if (orientation === 'auto') {
                                    pdf.setPage(pageWidth, pageHeight, image.width > image.height ? 'l' : 'p');
                                } else {
                                    pdf.setPage(pageWidth, pageHeight, orientation === 'landscape' ? 'l' : 'p');
                                }
                            } else {
                                // Standard page sizes
                                switch(pageSize) {
                                    case 'a4':
                                        pageWidth = 210;
                                        pageHeight = 297;
                                        break;
                                    case 'letter':
                                        pageWidth = 215.9;
                                        pageHeight = 279.4;
                                        break;
                                    case 'legal':
                                        pageWidth = 215.9;
                                        pageHeight = 355.6;
                                        break;
                                    case 'a5':
                                        pageWidth = 148;
                                        pageHeight = 210;
                                        break;
                                    default:
                                        pageWidth = 210;
                                        pageHeight = 297;
                                }
                                
                                // Adjust for orientation
                                if (orientation === 'landscape' || (orientation === 'auto' && image.width > image.height)) {
                                    [pageWidth, pageHeight] = [pageHeight, pageWidth];
                                }
                            }
                            
                            // Calculate available area (with margins)
                            const availableWidth = pageWidth - (margin * 2);
                            const availableHeight = pageHeight - (margin * 2);
                            
                            // Calculate image dimensions
                            let imgWidth, imgHeight;
                            const imgAspectRatio = image.width / image.height;
                            
                            if (imageFit === 'fill') {
                                // Fill the available area (stretching)
                                imgWidth = availableWidth;
                                imgHeight = availableHeight;
                            } else if (imageFit === 'fit') {
                                // Fit within area (maintain aspect ratio)
                                const areaAspectRatio = availableWidth / availableHeight;
                                
                                if (imgAspectRatio > areaAspectRatio) {
                                    // Image is wider than area
                                    imgWidth = availableWidth;
                                    imgHeight = availableWidth / imgAspectRatio;
                                } else {
                                    // Image is taller than area
                                    imgHeight = availableHeight;
                                    imgWidth = availableHeight * imgAspectRatio;
                                }
                            } else {
                                // Actual size (convert pixels to mm)
                                imgWidth = image.width * 25.4 / 96;
                                imgHeight = image.height * 25.4 / 96;
                            }
                            
                            // Calculate image position
                            let imgX, imgY;
                            
                            switch(imagePosition) {
                                case 'center':
                                    imgX = margin + (availableWidth - imgWidth) / 2;
                                    imgY = margin + (availableHeight - imgHeight) / 2;
                                    break;
                                case 'top':
                                    imgX = margin + (availableWidth - imgWidth) / 2;
                                    imgY = margin;
                                    break;
                                case 'bottom':
                                    imgX = margin + (availableWidth - imgWidth) / 2;
                                    imgY = pageHeight - margin - imgHeight;
                                    break;
                                case 'left':
                                    imgX = margin;
                                    imgY = margin + (availableHeight - imgHeight) / 2;
                                    break;
                                case 'right':
                                    imgX = pageWidth - margin - imgWidth;
                                    imgY = margin + (availableHeight - imgHeight) / 2;
                                    break;
                                default:
                                    imgX = margin;
                                    imgY = margin;
                            }
                            
                       // Add image to PDF
                        const imgData = await getImageData(image.dataUrl);
                        pdf.addImage(imgData, 'JPEG', imgX, imgY, imgWidth, imgHeight);
                    }
                    
                    // Generate PDF blob - MODIFIED SECTION
                    const pdfOutput = pdf.output('arraybuffer');
                    const blob = new Blob([pdfOutput], { type: 'application/pdf' });
                    return blob;
                    
                } catch (error) {
                    console.error('Conversion error:', error);
                    throw error;
                }
            }
            
            // Helper function to get image data
            function getImageData(dataUrl) {
                return new Promise((resolve) => {
                    const img = new Image();
                    img.onload = function() {
                        const canvas = document.createElement('canvas');
                        canvas.width = img.width;
                        canvas.height = img.height;
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(img, 0, 0);
                        resolve(canvas.toDataURL('image/jpeg'));
                    };
                    img.src = dataUrl;
                });
            }
            
            // MODIFIED download button handler
            document.getElementById('downloadBtn').addEventListener('click', function() {
                if (!pdfBlob) {
                    alert('Please convert images to PDF first');
                    return;
                }
                
                try {
                    const url = URL.createObjectURL(pdfBlob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'converted_images.pdf';
                    
                    // Append to body, click and remove
                    document.body.appendChild(a);
                    a.click();
                    
                    // Clean up
                    setTimeout(() => {
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);
                    }, 100);
                    
                } catch (error) {
                    console.error('Download error:', error);
                    alert('Error downloading PDF. Please try again.');
                }
            });
        }); 
    </script>
  </body>
</html>
